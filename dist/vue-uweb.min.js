/*!
 * vue-uweb v0.2.1
 * (c) 2018 raychenfj
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.VueUweb=e.VueUweb||{})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=t(function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),r=t(function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:o).supported=r,t.unsupported=o}),o=t(function(e){var t=Array.prototype.slice,o=e.exports=function(e,c,a){return a||(a={}),e===c||(e instanceof Date&&c instanceof Date?e.getTime()===c.getTime():!e||!c||"object"!=typeof e&&"object"!=typeof c?a.strict?e===c:e==c:function(e,c,a){var s,f;if(i(e)||i(c))return!1;if(e.prototype!==c.prototype)return!1;if(r(e))return!!r(c)&&(e=t.call(e),c=t.call(c),o(e,c,a));if(u(e)){if(!u(c))return!1;if(e.length!==c.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==c[s])return!1;return!0}try{var l=n(e),p=n(c)}catch(e){return!1}if(l.length!=p.length)return!1;for(l.sort(),p.sort(),s=l.length-1;s>=0;s--)if(l[s]!=p[s])return!1;for(s=l.length-1;s>=0;s--)if(f=l[s],!o(e[f],c[f],a))return!1;return typeof e==typeof c}(e,c,a))};function i(e){return null===e||void 0===e}function u(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}});function i(e){return void 0!==e.oldValue&&("object"==typeof e.value?o(e.value,e.oldValue):e.value===e.oldValue)}function u(e){return""===e.value||void 0===e.value||null===e.value}var c=function(e,t){if(!i(t)){var n=[];!1===t.value||"false"===t.value?n.push(!1):n.push(!0),p.setAutoPageview.apply(p,n)}},a=function(e,t){if(!i(t)&&!u(t)){e.removeEventListeners&&"function"==typeof e.removeEventListeners&&e.removeEventListeners();var n=[],r=Object.keys(t.modifiers).map(function(e){if(t.modifiers[e])return e});if("object"==typeof t.value){var o=t.value;o.category&&n.push(o.category),o.action&&n.push(o.action),o.label&&n.push(o.label),o.value&&n.push(o.value),o.nodeid&&n.push(o.nodeid)}else"string"==typeof t.value&&(n=t.value.split(",")).forEach(function(e,t){return n[t]=e.trim()});r.length||r.push("click");var c=[];r.forEach(function(t,r){c[r]=function(){return p.trackEvent.apply(p,n)},e.addEventListener(t,c[r],!1)}),e.removeEventListeners=function(){r.forEach(function(t,n){e.removeEventListener(t,c[n])})}}},s=[],f={bind:function(e,t){var n=s.findIndex(function(t){return t===e}),r=-1!==n;if("none"!==e.style.display){if(r&&s.splice(n,1),r||!i(t)&&!u(t)){var o=[];if("object"==typeof t.value){var c=t.value;c.content_url&&o.push(c.content_url),c.referer_url&&o.push(c.referer_url)}else"string"==typeof t.value&&t.value&&(o=t.value.split(",")).forEach(function(e,t){return o[t]=e.trim()});p.trackPageview.apply(p,o)}}else r||s.push(e)},unbind:function(e,t){var n=s.findIndex(function(t){return t===e});-1!==n&&s.splice(n,1)}};f.update=f.bind;var l={};l.promise=new Promise(function(e,t){l.resolve=e,l.reject=t});var p={_cache:[],_resolve:function(){l.resolve()},_reject:function(){l.reject()},_push:function(){this.debug(arguments),window._czc?window._czc.push.apply(window._czc,arguments):this._cache.push.apply(this._cache,arguments)},_createMethod:function(e){return function(){var t=Array.prototype.slice.apply(arguments);this._push(["_"+e].concat(t))}},debug:function(){},ready:function(){return l.promise},install:function(e,t){var n=this;if(!this.install.installed){t.debug?this.debug=console.debug:this.debug=function(){};var r=null;if("object"==typeof t?(r=t.siteId,!1!==t.autoPageview&&(t.autoPageview=!0)):r=t,!r)return console.error("siteId is missing");this.install.installed=!0;var o=document.createElement("script"),i="https://s95.cnzz.com/z_stat.php?id="+r+"&web_id="+r;o.src=t.src||i,o.onload=function(){if(!window._czc)return console.error("loading uweb statistics script failed, please check src and siteId"),n._reject();n._resolve(),n._cache.forEach(function(e){window._czc.push(e)}),n._cache=[]},this.setAccount(t.siteId),this.setAutoPageview(t.autoPageview),document.body.appendChild(o),Object.defineProperty(e.prototype,"$uweb",{get:function(){return n}}),e.directive("auto-pageview",c),e.directive("track-event",a),e.directive("track-pageview",f)}},patch:function(e){this[e]=this._createMethod(e)}};["trackPageview","trackEvent","setCustomVar","setAccount","setAutoPageview","deleteCustomVar"].forEach(function(e){return p[e]=p._createMethod(e)}),window.Vue&&(window.uweb=p),e.default=p,Object.defineProperty(e,"__esModule",{value:!0})});